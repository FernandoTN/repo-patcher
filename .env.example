# Environment Configuration Template for Repo Patcher
# Copy this file to .env and fill in your values

# ===== AI Configuration =====
# OpenAI API key for AI-powered test fixing
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=4000

# ===== GitHub Configuration =====
# GitHub token for repository access and PR creation
GITHUB_TOKEN=ghp_your-github-token-here
GITHUB_REPOSITORY=owner/repo-name

# ===== Agent Configuration =====
# Logging level (DEBUG, INFO, WARNING, ERROR)
REPO_PATCHER_LOG_LEVEL=INFO

# Cost and safety limits
REPO_PATCHER_MAX_COST=5.00
REPO_PATCHER_MAX_ITERATIONS=3
REPO_PATCHER_TIMEOUT=600

# Working directory paths
WORKSPACE_PATH=/workspace
REPO_PATCHER_CONFIG_PATH=/workspace/config

# ===== Monitoring Configuration =====
# Enable OpenTelemetry monitoring
OTEL_ENABLED=true
OTEL_SERVICE_NAME=repo-patcher
OTEL_SERVICE_VERSION=0.1.0
OTEL_RESOURCE_ATTRIBUTES=service.name=repo-patcher,service.version=0.1.0,deployment.environment=production

# Jaeger tracing endpoint
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# Prometheus metrics
PROMETHEUS_PORT=8000
METRICS_HOST=0.0.0.0
METRICS_PORT=8000

# ===== Container Configuration =====
# Docker resource limits
DOCKER_MEMORY_LIMIT=2g
DOCKER_CPU_LIMIT=2

# Security settings
DOCKER_NO_NEW_PRIVILEGES=true
DOCKER_READONLY_ROOT=false

# ===== Development Configuration =====
# Enable debug mode for development
DEBUG=false

# Additional logging for development
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# ===== Health Check Configuration =====
# Health check intervals and timeouts
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# Critical thresholds
CPU_THRESHOLD_WARNING=70
CPU_THRESHOLD_CRITICAL=90
MEMORY_THRESHOLD_WARNING=85
MEMORY_THRESHOLD_CRITICAL=95
DISK_THRESHOLD_WARNING=85
DISK_THRESHOLD_CRITICAL=95

# ===== Security Configuration =====
# Disable if running in trusted environment
SECURITY_ENABLED=true

# Path protection patterns (comma-separated)
BLOCKED_PATHS=".github/,.git/,Dockerfile,docker-compose.yml,*.env,*.key,*.pem,*secret*,*config*"

# File operation limits
MAX_DIFF_LINES_PER_FILE=100
MAX_DIFF_LINES_TOTAL=500
MAX_FILE_SIZE_MB=10

# ===== Optional: External Services =====
# Slack notifications (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

# Email notifications (optional)  
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# Database for metrics storage (optional)
# DATABASE_URL=postgresql://user:pass@localhost/repo_patcher

# Redis for caching (optional)
# REDIS_URL=redis://localhost:6379/0